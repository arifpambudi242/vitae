{% extends 'authenticate/base.html' %}
{% block content %}
<div class="main-container d-flex">
  <!--<div class="sidebar" id="sidebar">
    <div class="header-box">
      <h1 class="fs-4"><span class="bg-white text-dark rounded shadow px-2 m">CL</span>Coding League</h1>
    </div>

  </div>-->
  <div class="content">
    <h1 class ="text-center"> Add Response</h1>
    {% if user.is_authenticated %}
    <!-- display messages if exist -->
    {% if messages %}
      {% for message in messages %}
      <div id="message" {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</div>
      {% endfor %}
    {% endif %}
    <div class = "col-md-6 offset-md-3">
      <form method ="POST">
          {% csrf_token %}
          
          <div class="mt-3 mb-3">
            <label for="User" class="form-label">User</label>
            <input type="text" class="form-control" value="{{ response.user }}" name="user" readonly>
          </div>

          
          <div class="mt-3 mb-3">
            <label for="Title" class="form-label">Response Title</label>
            <input type="text" class="form-control" value="{{ response.title }}" name="title">
          </div>

          <div class="mt-3 mb-3">
            <label for="Content" class="form-label">Response Content</label>
            <input type="text" class="form-control" value="{{ response.content }}" name="content">
          </div>

          <div class="mt-3 mb-3">
            <!-- dropdown of categories -->
            <label for="Category" class="form-label">Category</label>
            <select class="form-control" name="category" id="Category">
              {% if response.categories %}
              {% for category in response.categories %}
              <option class="form-control" value="{{ category.0 }}">{{ category.1 }}</option>
              {% endfor %}
              {% else %}
              <option class="form-control" value="">There is no category</option>
              {% endif %}
            </select>
            <!-- <input type="text" class="form-control" value="{{ response.categories }}" name="category"> -->
          </div>

          <div class="mt-3 mb-3">
            <label for="Tags" class="form-label">Tags</label>
            <input type="text" class="form-control" value="{{ response.tags }}" name="tags">
          </div>

          
          <button type="submit" class="btn btn-secondary">Update</button>
      </form>
  </div class>

    {% endif %}
  </div>
</div>
<script>
  // if div#message exist redirect to home
  if (document.getElementById("message")) {
    setTimeout(function () {
      window.location.href = "{% url 'home' %}";
    }, 2000);
  }
</script>
{% endblock content %}